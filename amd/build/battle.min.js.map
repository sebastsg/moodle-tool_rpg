{"version":3,"file":"battle.min.js","sources":["../src/battle.js"],"sourcesContent":["import Ajax from 'core/ajax';\n\nconst Selectors = {\n    startBattleButton: '.tool_rpg-start-battle-button',\n    declineBattleButton: '.tool_rpg-decline-battle-button',\n    attackMonsterButton: '.tool_rpg-attack-monster-button',\n    reloadButton: '.tool_rpg-reload-button'\n};\n\nconst startBattle = (battleid) => {\n    Ajax.call([{\n        methodname: 'tool_rpg_start_battle',\n        args: {battleid: battleid}\n    }])[0].done(() => location.reload());\n};\n\nconst declineBattle = (battleid) => {\n    Ajax.call([{\n        methodname: 'tool_rpg_decline_battle',\n        args: {battleid: battleid}\n    }])[0].done(() => {\n        document.querySelector('.tool_rpg-start-battle')?.remove();\n        document.querySelector('.tool_rpg-ongoing-battle')?.remove();\n    });\n};\n\nconst attackMonster = (battleid) => {\n    Ajax.call([{\n        methodname: 'tool_rpg_attack_monster',\n        args: {battleid: battleid}\n    }])[0].done(() => location.reload());\n};\n\nexport const init = () => {\n    document.addEventListener('click', event => {\n        if (event.target.closest(Selectors.startBattleButton)) {\n            if (event.target.dataset.battleid) {\n                startBattle(event.target.dataset.battleid);\n            }\n        } else if (event.target.closest(Selectors.declineBattleButton)) {\n            if (event.target.dataset.battleid) {\n                declineBattle(event.target.dataset.battleid);\n            }\n        } else if (event.target.closest(Selectors.attackMonsterButton)) {\n            if (event.target.dataset.battleid) {\n                attackMonster(event.target.dataset.battleid);\n            }\n        } else if (event.target.closest(Selectors.reloadButton)) {\n            location.reload();\n        }\n    });\n};\n"],"names":["Selectors","document","addEventListener","event","battleid","target","closest","dataset","call","methodname","args","done","location","reload","querySelector","remove","declineBattle","attackMonster"],"mappings":"0NAEMA,4BACiB,gCADjBA,8BAEmB,kCAFnBA,8BAGmB,kCAHnBA,uBAIY,wCA2BE,KAChBC,SAASC,iBAAiB,SAASC,QAzBlBC,IAAAA,SA0BTD,MAAME,OAAOC,QAAQN,6BACjBG,MAAME,OAAOE,QAAQH,WA3BhBA,SA4BOD,MAAME,OAAOE,QAAQH,uBA3BxCI,KAAK,CAAC,CACPC,WAAY,wBACZC,KAAM,CAACN,SAAUA,aACjB,GAAGO,MAAK,IAAMC,SAASC,YA0BZV,MAAME,OAAOC,QAAQN,+BACxBG,MAAME,OAAOE,QAAQH,UAxBdA,CAAAA,yBACdI,KAAK,CAAC,CACPC,WAAY,0BACZC,KAAM,CAACN,SAAUA,aACjB,GAAGO,MAAK,oFACRV,SAASa,cAAc,kFAA2BC,wCAClDd,SAASa,cAAc,sFAA6BC,aAmB5CC,CAAcb,MAAME,OAAOE,QAAQH,UAEhCD,MAAME,OAAOC,QAAQN,+BACxBG,MAAME,OAAOE,QAAQH,UAlBdA,CAAAA,yBACdI,KAAK,CAAC,CACPC,WAAY,0BACZC,KAAM,CAACN,SAAUA,aACjB,GAAGO,MAAK,IAAMC,SAASC,YAefI,CAAcd,MAAME,OAAOE,QAAQH,UAEhCD,MAAME,OAAOC,QAAQN,yBAC5BY,SAASC"}